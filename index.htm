<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      .master {
        width: 680px;
        display: flex;
        flex-direction: row;
        align-items: center;
        font-family: Arial;
        padding: 23px;
        height: 300px;
      }

      .right-container {
        height: 300px;
        width: 270px;
      }

      .right-section {
        background: #eefafa;
        border-radius: 7px;
        padding: 20px;
      }

      .title {
        font-size: 14px;
        font-weight: bold;
        width: 100%;
        padding: 15px 0px 15px 25px;
      }

      .slide-container {
        width: 400px;
        margin-bottom: 35px;
      }

      .slide-container-label {
        color: #878787;
        font-size: 12px;
      }

      .slide-container-amount {
        font-size: 14px;
        background: #eefafa;
        width: 30%;
        padding: 3px 0px 3px 10px;
        border-radius: 3px;
      }

      .slide-wrapper {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 0px;
      }

      .loan-slider {
        -webkit-appearance: none;
        width: 90%;
        height: 5px;
        background: linear-gradient(90deg, #25bdbf 25%, #f4f1f1 20%);
        outline: none;
        opacity: 0.7;
        border-radius: 3px;
        -webkit-transition: 0.2s;
        transition: opacity 0.2s;
      }

      .balloon-slider {
        -webkit-appearance: none;
        width: 90%;
        height: 5px;
        background: linear-gradient(90deg, #25bdbf 0%, #f4f1f1 0%);
        outline: none;
        opacity: 0.7;
        border-radius: 3px;
        -webkit-transition: 0.2s;
        transition: opacity 0.2s;
      }

      .loan-slider:hover {
        opacity: 1;
      }

      .balloon-slider:hover {
        opacity: 1;
      }

      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        border: 3px solid #25bdbf;
        height: 19px;
        width: 19px;
        border-radius: 15px;
        background: #ffffff;
        cursor: pointer;
        margin-top: 0px;
        box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
      }

      input[type="range"]::-moz-range-thumb {
        box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
        border: 3px solid #25bdbf;
        height: 19px;
        width: 19px;
        border-radius: 15px;
        background: #ffffff;
        cursor: pointer;
      }

      input[type="range"]::-ms-thumb {
        box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
        border: 3px solid #25bdbf;
        height: 19px;
        width: 19px;
        border-radius: 15px;
        background: #ffffff;
        cursor: pointer;
      }

      .big-total {
        margin: 18px 0px;
        color: #09595a;
        display: flex;
        font-family: Arial, Helvetica, sans-serif;
      }

      .dollar-sign {
        font-size: 30px;
        display: flex;
        margin-top: 8px;
      }

      .dollars {
        font-size: 70px;
      }

      .cents {
        font-size: 30px;
        display: flex;
        align-items: flex-end;
        margin-bottom: 6px;
      }

      .rows {
        margin-top: 65px;
      }

      .row {
        font-size: 12px;
        width: 78%;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        margin: 5px 0px;
      }

      .label {
        font-weight: bold;
        max-width: 56%;
      }

      .interest {
        font-family: "Arial";
        display: inline-block;
        width: calc(100% - 10px);
        padding: 3px 0px 3px 10px;
        outline: 0;
        border: 0px solid #000000;
        border-radius: 3px;
        background: #eefafa;
        color: #000000;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
      }

      .error-container {
        width: 78%;
        height: 0;
        display: flex;
      }

      .error-message {
        color: red;
        flex: 1;
        text-align: right;
        align-items: flex-end;
        font-size: 12px;
      }

      .selectable {
        width: 43%;
      }

      .value {
        font-family: "Arial";
        display: inline-block;
        width: calc(100% - 10px);
        padding: 3px 0px 3px 10px;
        outline: 0;
        border: 0px solid #000000;
        border-radius: 3px;
        background: #eefafa;
        color: #000000;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
      }

      .selectable select {
        font-family: "Arial";
        display: inline-block;
        font-size: 12px;
        width: 100%;
        cursor: pointer;
        padding: 3px 0px 3px 10px;
        outline: 0;
        border: 0px solid #000000;
        border-radius: 5px;
        background: #eefafa;
        color: #000000;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
      }

      .selectable select::-ms-expand {
        display: none;
      }

      .selectable select:hover,
      .selectable select:focus,
      .interest:hover {
        color: #000000;
        background: #edfcfc;
      }

      .select select:disabled {
        opacity: 0.5;
        pointer-events: none;
      }

      .borrowed-container {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding-bottom: 30px;
      }

      .borrowed-amount-container {
        background: #c5eded;
        border-radius: 3px;
        font-size: 12px;
        color: #878787;
        padding: 3px;
        width: 75px;
      }

      .btn {
        background: #feca31;
        border-radius: 20px;
        cursor: pointer;
        color: #444;
        font-size: 12px;
        font-weight: bold;
        padding: 12px 42px;
        text-decoration: none;
        position: absolute;
        top: 233px;
        left: 460px;
      }

      .btn:hover {
        background: #ffd763;
      }

      .label-text {
        color: #878787;
        font-size: 12px;
      }

      @media only screen and (max-width: 680px) {
        .master {
          flex-direction: column;
          width: 380px;
          height: 600px;
        }

        .right-container {
          margin-top: 50px;
          width: 350px;
          height: 230px;
        }

        .slide-container {
          width: 350px;
        }

        .loan-slider {
          width: 100%;
        }

        .balloon-slider {
          width: 100%;
        }

        .rows {
          margin-top: 15px;
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .row {
          width: 100%;
        }

        .btn {
          left: 100px;
          top: 560px;
        }
      }
    </style>
  </head>
  <body>
    <div class="master">
      <div class="left-section">
        <div class="slide-container">
          <div class="slide-container-label">LOAN AMOUNT</div>
          <div id="loan-amount" class="slide-container-amount">$50,000</div>
          <div class="slide-wrapper">
            <input
              type="range"
              step="1000"
              min="0"
              max="200000"
              value="50000"
              class="loan-slider"
              id="loan-range"
            />
          </div>
        </div>
        <div class="slide-container">
          <div class="slide-container-label">BALLOON PAYMENT</div>
          <div id="balloon-amount" class="slide-container-amount">$0</div>
          <div class="slide-wrapper">
            <input
              type="range"
              step="1000"
              min="0"
              max="20000"
              value="0"
              class="balloon-slider"
              id="balloon-range"
            />
          </div>
        </div>
        <div class="rows">
          <div class="row">
            <span class="label-text">INTEREST RATE</span>
            <span class="selectable"
              ><input
                type="text"
                id="interest-amount"
                class="interest"
                value="4.00%"
            /></span>
          </div>
          <div id="error-container" class="error-container">
            <span id="error" class="error-message"></span>
          </div>
          <div class="row">
            <div class="label-text">LENGTH</div>
            <div class="selectable">
              <select name="length" id="lengthValue">
                <option value="1">1 YEAR</option>
                <option value="2" selected="selected">2 YEARS</option>
                <option value="3">3 YEARS</option>
                <option value="4">4 YEARS</option>
                <option value="5">5 YEARS</option>
                <option value="6">6 YEARS</option>
                <option value="7">7 YEARS</option>
              </select>
            </div>
          </div>
          <div class="row">
            <span class="label-text">PAYMENT FREQUENCY</span>
            <span class="selectable">
              <select name="frequency" id="frequencyValue">
                <option value="52.1786">WEEKLY</option>
                <option value="26.0893">FORTNIGHTLY</option>
                <option value="12">MONTHLY</option>
              </select></span
            >
          </div>
        </div>
      </div>
      <div class="right-container">
        <div class="right-section">
          <div class="label-text">YOUR TOTAL PAYMENT WILL BE</div>
          <div class="big-total">
            <span class="dollar-sign">$</span
            ><span id="dollars" class="dollars">500</span
            ><span class="cents">.00</span>
          </div>
          <div class="borrowed-container">
            <div class="label-text">AMOUNT BORROWED</div>
            <div id="borrowed-amount" class="borrowed-amount-container">
              $40,000
            </div>
          </div>
          <!-- button doesn't do anything -->
          <a href="#" class="btn">GET A QUOTE</a>
        </div>
      </div>
    </div>

    <script>
      // declaring variables
      var loanSlider = document.getElementById("loan-range");
      var balloonSlider = document.getElementById("balloon-range");
      var loanAmountOutput = document.getElementById("loan-amount");
      var balloonAmountOutput = document.getElementById("balloon-amount");
      var amountOutput = document.getElementById("borrowed-amount");
      var repayments = document.getElementById("dollars");
      var lengthValue = document.getElementById("lengthValue");
      var frequencyValue = document.getElementById("frequencyValue");
      var interestInput = document.getElementById("interest-amount");
      var errorContainer = document.getElementById("error-container");
      var error = document.getElementById("error");
      var interestRate = 4;

      // currency formatter
      var getCurrency = function (price) {
        if (price < 0) return "0";
        if (price.length > 3) {
          var arr = price.split("");
          var formattedArr = [];
          for (var i = 0; i < arr.length; i++) {
            if (i === arr.length - 3) {
              formattedArr.push(",");
            }
            formattedArr.push(arr[i]);
          }
          return formattedArr.join("");
        }
        return price;
      };

      var calculate = function () {
        var value = Math.ceil(
          ((loanSlider.value - balloonSlider.value) *
            (parseFloat(interestRate) / 100) +
            (loanSlider.value - balloonSlider.value)) /
            (frequencyValue.value * lengthValue.value)
        );
        if (value < 0) {
          repayments.innerHTML = 0;
        } else {
          repayments.innerHTML = value;
        }
      };

      // actions to occur when moving the loan slider
      loanSlider.oninput = function () {
        loanAmountOutput.innerHTML = "$" + getCurrency(this.value);
        amountOutput.innerHTML =
          "$" + getCurrency((this.value - balloonSlider.value).toString());
        calculate();
      };

      // actions to occur when moving the balloon slider
      balloonSlider.oninput = function () {
        balloonAmountOutput.innerHTML = "$" + getCurrency(this.value);
        amountOutput.innerHTML =
          "$" + getCurrency((loanSlider.value - this.value).toString());
        calculate();
      };

      // dynamically adjust the background colors
      loanSlider.addEventListener("mousemove", function () {
        var x = loanSlider.value / 2000;
        var color =
          "linear-gradient(90deg, #25bdbf " + x + "%, #f4f1f1 " + x + "%)";
        loanSlider.style.background = color;
      });
      balloonSlider.addEventListener("mousemove", function () {
        var x = balloonSlider.value / 200;
        var color =
          "linear-gradient(90deg, #25bdbf " + x + "%, #f4f1f1 " + x + "%)";
        balloonSlider.style.background = color;
      });

      // actions to occur when changing repayment frequency
      frequencyValue.onchange = function () {
        calculate();
      };

      // changes to occur when changing the length of loan
      lengthValue.onchange = function () {
        calculate();
      };

      interestInput.onfocus = function () {
        interestInput.value = parseFloat(interestRate).toFixed(2);
      };

      interestInput.onblur = function () {
        if (parseFloat(interestInput.value).toFixed(2) === "NaN") {
          errorContainer.style.height = "auto";
          error.innerHTML = "Only enter numbers";
        } else if (parseFloat(interestInput.value).toFixed(2) < 0) {
          errorContainer.style.height = "auto";
          error.innerHTML = "Enter more than 0";
        } else if (parseFloat(interestInput.value).toFixed(2) > 20) {
          errorContainer.style.height = "auto";
          error.innerHTML = "Enter less than 20";
        } else {
          errorContainer.style.height = 0;
          error.innerHTML = "";
          interestInput.value =
            parseFloat(interestInput.value).toFixed(2) + "%";
          interestRate = interestInput.value;
          calculate();
        }
      };
    </script>
  </body>
</html>
